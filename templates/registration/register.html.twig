{% extends 'base.html.twig' %}

{% block title %}Register{% endblock %}

{% block body %}
    <div class="container">
        <div class="row justify-content-center align-items-center" style="height: 100vh;">
            <div class="col-md-6">
                <h2 class="mb-4">Register</h2>
                {{ form_start(registrationForm) }}
                {{ form_row(registrationForm.username, {'attr': {'class': 'form-control mb-3'}}) }}
                {{ form_row(registrationForm.password, {'attr': {'class': 'form-control mb-3'}}) }}
                <div id="currencyField" style="display:none;">
                    {{ form_row(registrationForm.currency, {'attr': {'class': 'form-control mb-3'}}) }}
                </div>
                {{ form_row(registrationForm.accountType, {'attr': {'class': 'form-select mb-3'}}) }}
                {{ form_row(registrationForm.register, {'attr': {'class': 'btn btn-primary'}}) }}
                {{ form_end(registrationForm) }}
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const accountTypeField = document.querySelector('#user_registration_accountType');
            const currencyField = document.querySelector('#currencyField');
            const agentRoleField = document.querySelector('.agent-role-selector'); // Adjust the selector as needed

            function toggleCurrencyDisplay() {
                if (accountTypeField.value === 'ROLE_USER') {
                    currencyField.style.display = '';
                    agentRoleField.style.display = 'none';
                } else {
                    currencyField.style.display = 'none';
                    agentRoleField.style.display = '';
                }
            }

            toggleCurrencyDisplay();
            accountTypeField.addEventListener('change', toggleCurrencyDisplay);
        });
    </script>
{% endblock %}
